#!/bin/bash
user="hadmin"
data_path="/hadoop_data/"
log_path="/usr/local/hadoop/logs"
create_path="mkdir -p $data_path/{data,log,namenode,tmp}"
nodes="datanode80,namenode,datanode124"
pdsh -R ssh -w $nodes -l root "rm -rf $log_path/*"
pdsh -R ssh -w $nodes -l root "rm -rf $data_path/*"
pdsh -R ssh -w $nodes -l root "$create_path"
pdsh -R ssh -w $nodes -l root "mkdir -p $log_path"
pdsh -R ssh -w $nodes -l root "chown -R $user:$user $data_path"
pdsh -R ssh -w $nodes -l root "chown -R $user:$user $log_path"
